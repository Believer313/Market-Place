<% layout('layouts/boilerplate') %>
<% title = 'Product List' %>

<h3>Product List</h3>
<div class="row">
  <% allProducts.forEach(product => { %>
    <div class="col-md-4">
      <a href="/products/<%= product._id %>" class="card mb-4" style="width: 16rem; text-decoration: none; color: inherit;">
        <img src="<%= product.imageUrl %>" class="card-img-top" alt="<%= product.name %>">
        <div class="card-body">
          <h5 class="card-title"><%= product.name %></h5>
          <p class="card-text"><%= product.description %></p>
          <p class="card-text"><strong>Price:</strong> $<%= product.price %></p>
          <p class="card-text"><strong>Rating:</strong> <%= product.rating %> (<%= product.ratingCount %> reviews)</p>
          <p class="card-text"><strong>Category:</strong> <%= product.category %></p>
        </div>
      </a>
      <div class="d-flex justify-content-between mt-2">
        <a href="/products/<%= product._id %>/edit" class="btn btn-secondary">Edit</a>
        <form action="/products/<%= product._id %>?_method=DELETE" method="POST" style="display:inline;">
          <button type="submit" class="btn btn-danger">Delete</button>
        </form>
      </div>
    </div>
  <% }); %>
</div>
<a href="/products/new" class="btn btn-success">Add New Product</a>